#### 浏览器的渲染过程与原理

##### 浏览器主要组成与浏览器线程

1. 浏览器组件

浏览器大体由以下组件组成，各个浏览器可能有些许不同：

- 界面控件 - 包括地址栏、前进后退、书签菜单等窗口上除了网页显示区域以外的部分
- 浏览器引擎 - 查询与操作渲染引擎的接口
- 渲染引擎 - 负责显示请求的内容。比如请求到HTML，渲染引擎解析HTML、CSS并将解析的内容显示到窗口中
- 网络 - 用于网络请求，如HTTP请求。独立于平台的接口，不同平台采用不同的实现防方式
- UI后端 - 绘制基础元件，如组合框和窗口。它提供平台无关的接口，内部使用操作系统的相应实现
- JS解析器 - 用于解析执行JavaScript代码
- 数据存储持久层 - 这是一个持久层。浏览器可能需要在本地保存各种数据，例如cookie。浏览器还支持存储机制，例如localStorage，IndexedDB，WebSQL和FileSystem

注意：chrome浏览器与其他浏览器不同，chrome使用多个渲染引擎实例，每个Tab页一个，即每个Tab都是一个独立的进程

2. 浏览器中的进程和线程

chrome浏览器使用多个进程来隔离不同的页面，打开一个网页相当于起了一个进程，每个页面都有独立的渲染引擎实例。因为如果是非多进程的话，如果浏览器中的一个网页崩溃，将会影响其他打开的页面，另外，相对于线程，进程之间不存在共享资源和地址空间，不会存在太多安全问题（共享资源和地址空间，有可能会导致恶意修改惠州获取非授权数据等复杂的安全问题）。

在内核控制下，各线程相互配合以保持同步，一个浏览器通常由以下常驻线程组成：

**GUI渲染线程**

**JavaScript引擎线程**

**定时器触发线程**

**事件触发线程**

**异步http请求线程**

**参考：**

[前端必会！四步带你吃透浏览器渲染基本原理](https://blog.csdn.net/csdnnews/article/details/95267307)

[How Browsers Work: Behind the scenes of modern web browsers](https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/)

[浏览器的渲染：过程与原理](https://zhuanlan.zhihu.com/p/29418126)